---
title: "Fiddler Crab Tasks"
author: "Desik Somasundaram"
date: "8/20/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(here)
library(janitor)
library(kableExtra)
library(ggrepel)
```


## Introduction

This blog post explores a dataset including Fiddler crab body size in salt marshes from Florida to Massachusetts, USA at PIE and VCR LTER and NOAA NERR sites during summer 2016 sourced from EDI Data Portal.
The carapace width of the crabs observed at the different sites have an interesting correlation with the latitude of the habitat and the mean water temperature in the area.


```{r include=FALSE}
fiddler_crab_sizes <- read_csv(here("data", "HTL-MAR-FiddlerCrabBodySize.csv" ))

```

```{r include=FALSE}
fiddler_crab_clean <- clean_names(fiddler_crab_sizes)

```

```{r, fig.alt= "Jitter plot of crab carapace width in millimeters at different latitudes showing that as latitude increases, carapace width tends to increase"}
crabs_plot <- ggplot(fiddler_crab_clean, aes(x = latitude, y = carapace_width)) +
  geom_jitter() + 
  labs(title = "Carapace width of crabs at different latitudes", x = "Latitude", y = "Carapace width (mm)")

crabs_plot
```

### Jitter plot of crab carapace width (mm) in salt marshes from Florida to Massachusetts based on latitude

```{r echo=FALSE}
summary_carpace <- fiddler_crab_clean %>%
  group_by(site) %>% 
  summarize(mean = round(mean(carapace_width),2), sd = round(sd(carapace_width),2), n = n())

summary_table_carp <- summary_carpace %>% 
  kable(col.names = c("Site", "Mean of Carapace Width (mm)", "Standard Deviation (mm)", "Number of Observations")) %>%
  kable_classic(full_width = FALSE)
  
  
summary_table_carp
  
```
### Table showing the mean, standard deviation and number of observations for crab carapace width by site

```{r include=FALSE}
summary_water <- fiddler_crab_clean %>% 
  group_by(site) %>% 
  summarize(mean_matw = mean(matw))

summary_updated <- summary_carpace %>% 
  left_join(summary_water)

```


```{r, echo= FALSE, fig.alt= "Scatter plot of mean carapace width by mean water temperature based on site showing carapace width decreasing with increased water temperature"}

summary_plot <- ggplot(summary_updated, aes(x = mean_matw, y = mean)) +
  geom_point() +
  labs(title = "Mean carapace width by mean water temperature based on site", x = "Mean annual water temperature (degrees celsius)", y = "Mean carapace width (mm)") +
  geom_text_repel(aes(label = site), size = 2.5) +
  theme_minimal()
  
  

summary_plot
```

### Mean carapace width by mean water temperature based on site along the U.S. east coast


## Sources

Hao Zhu (2021). kableExtra: Construct Complex Table with ‘kable’
  and Pipe Syntax. R package version 1.3.4.

Johnson, D. 2019. Fiddler crab body size in salt marshes from Florida to Massachusetts, USA at PIE and VCR LTER and NOAA NERR sites during summer 2016. ver 1. Environmental Data Initiative. https://doi.org/10.6073/pasta/4c27d2e778d3325d3830a5142e3839bb (Accessed 2021-08-20).

Kamil Slowikowski (2021). ggrepel: Automatically Position
  Non-Overlapping Text Labels with ‘ggplot2’. R package version
  0.9.1. https://CRAN.R-project.org/package=ggrepel

Kirill Müller (2020). here: A Simpler Way to Find Your Files. R
  package version 1.0.1. https://CRAN.R-project.org/package=here

Sam Firke (2021). janitor: Simple Tools for Examining and Cleaning
  Dirty Data. R package version 2.1.0.
  https://CRAN.R-project.org/package=janitor

Wickham et al., (2019). Welcome to the tidyverse. Journal of Open
  Source Software, 4(43), 1686, https://doi.org/10.21105/joss.01686
  
